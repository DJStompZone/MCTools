@page "/assets"
@using MCTools.Controllers
@using MCTools.Logic
@using MCTools.Components
@using MCTools.Enums

@inherits LayoutComponentBase
@inject ISnackbar Snackbar
@inject ApiController _apiController
@inject HttpClient _httpClient
@inject JSHelper _jsHelper

<MudText Typo="Typo.h3" GutterBottom="true">Vanilla Texture Assets</MudText>
<MudPaper Class="px-8">
	<MudGrid Justify="Justify.Center">
		<VersionSelector ApiController="_apiController" VersionChanged="SelectedVersionChanged" EditionChanged="SelectedEditionChanged" IsProcessing="IsProcessing" />
		@if (SelectedEdition == MCEdition.Java)
		{
			<MudItem xs="12" Class="pa-2 my-1">
				<MudText Typo="Typo.h6" GutterBottom="true">Options</MudText>
				<MudGrid Justify="Justify.SpaceAround" Spacing="2" >
					<MudList>
						<ToggleSwitch @bind-Checked="IncludeMcMetas"
									  Label="Include MCMeta Files"
									  TooltipText="Include MCMeta files in the assets"
									  IsProcessing="IsProcessing" />
					</MudList>
				</MudGrid>
			</MudItem>
		}
		@if (MainLayout.DebugMode)
		{
			<MudItem xs="12" Class="pa-2 my-1">
				<MudText Typo="Typo.h6" GutterBottom="true">Debug</MudText>
				<MudGrid Justify="Justify.SpaceAround" Spacing="2" >
					<MudList>
						<ToggleSwitch @bind-Checked="OutputSourceUrl"
									  Label="Output Source URL"
									  TooltipText="Output Source URL to the console"
									  IsProcessing="IsProcessing" />
						@if (SelectedEdition == MCEdition.Java)
						{
							<ToggleSwitch @bind-Checked="DownloadRawJar"
										  Label="Download JAR"
										  TooltipText="Download client.jar instead of the computed assets"
										  IsProcessing="IsProcessing" />
						}
					</MudList>
					<MudList>
						<ToggleSwitch @bind-Checked="PerfLogging"
									  Label="Performance Logging"
									  TooltipText="Log performance to the console"
									  IsProcessing="IsProcessing" />
					</MudList>
				</MudGrid>
			</MudItem>
		}
		<MudItem xs="12">
			<MudProgressLinear Color="Color.Primary" Size="Size.Small" Value="0" Max="100" Indeterminate="IsProcessing" Class="my-7" />
			<MudButton HtmlTag="label"
					   Variant="Variant.Filled"
					   Color="Color.Primary"
					   StartIcon="@Icons.Material.Filled.CloudDownload"
					   style="width: 100%;"
					   Disabled="IsProcessing"
					   OnClick="@DownloadAssets">
				Download
			</MudButton>
		</MudItem>
	</MudGrid>
</MudPaper>
