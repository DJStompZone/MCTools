@page "/assets"
@using MCTools.Controllers
@using MCTools.Logic
@using MCTools.Components

@inherits LayoutComponentBase
@inject ISnackbar Snackbar
@inject ApiController _apiController
@inject HttpClient _httpClient
@inject JSHelper _jsHelper

<MudText Typo="Typo.h3" GutterBottom="true">Vanilla Texture Assets</MudText>
<MudPaper Class="px-8">
	<MudGrid Justify="Justify.Center">
		<VersionSelector ApiController="_apiController" VersionChanged="SelectedVersionChanged" EditionChanged="SelectedEditionChanged" IsProcessing="IsProcessing" DisableBedrock="true" />
		@if (MainLayout.DebugMode)
		{
			<MudItem xs="12" Class="pa-2 my-1">
				<MudText Typo="Typo.h6" GutterBottom="true">Debug</MudText>
				<MudGrid Justify="Justify.SpaceAround" Spacing="2" >
					<MudList>
						<MudItem Class="my-1">
							<MudSwitch @bind-Checked="OutputSourceUrl" Label="Output Source URL" Color="Color.Primary" Disabled="IsProcessing" />
						</MudItem>
					</MudList>
					<MudList>
						<MudItem Class="my-1">
							<MudSwitch @bind-Checked="PerfLogging" Label="Performance Logging" Color="Color.Primary" Disabled="IsProcessing" />
						</MudItem>
					</MudList>
				</MudGrid>
			</MudItem>
		}
		<MudItem xs="12">
			@if (IsProcessing)
			{
				<MudProgressLinear Color="Color.Primary" Size="Size.Small" Indeterminate="true" Class="my-7" />
			}
			else
			{
				<MudProgressLinear Color="Color.Primary" Size="Size.Small" Value="0" Max="100" Class="my-7" />
			}
			<MudButton HtmlTag="label"
					   Variant="Variant.Filled"
					   Color="Color.Primary"
					   StartIcon="@Icons.Material.Filled.CloudDownload"
					   style="width: 100%;"
					   Disabled="IsProcessing"
					   OnClick="@DownloadAssets">
				Download Vanilla Texture Assets
			</MudButton>
		</MudItem>
	</MudGrid>
</MudPaper>